(this["webpackJsonpmelody-front"]=this["webpackJsonpmelody-front"]||[]).push([[0],{113:function(e,t){},114:function(e,t){},115:function(e,t){},116:function(e,t){},117:function(e,t){},120:function(e,t,n){},124:function(e,t,n){"use strict";n.r(t);var c=n(7),a=n(0),o=n.n(a),i=n(24),r=n.n(i),s=n(19),j=n(56),l=n.n(j),d=n(35),b=n.n(d),u=n(57),p=n(26),O=n(36),f=n(139),h=n(37),v=n.n(h),x=n(63),m=n.n(x),y=n(64),g=n.n(y),S=n(65),k=n.n(S),w=n(66),I=n.n(w),R=n(67),C=n.n(R);n(120);p.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(p.c.version,"/pdf.worker.js");var L=new l.a({bitRate:128});function A(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)(!1),r=Object(s.a)(i,2),j=r[0],l=r[1],d=Object(a.useState)(!1),h=Object(s.a)(d,2),x=h[0],y=h[1],S=Object(a.useState)(null),w=Object(s.a)(S,2),R=w[0],A=w[1],U=Object(a.useState)(null),M=Object(s.a)(U,2),D=M[0],F=M[1],N=Object(a.useState)(null),P=Object(s.a)(N,2),B=P[0],T=P[1],E=function(){R&&j&&(l(!1),R.pause(),R.currentTime=0)},J=Object(a.useState)(null),W=Object(s.a)(J,2),G=W[0],_=W[1],q=Object(a.useState)(1),z=Object(s.a)(q,2),H=z[0],K=z[1];return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)("header",{className:"App-header",children:Object(c.jsx)("h1",{children:"Melody Snippets"})}),Object(c.jsxs)("body",{className:"App-body",children:[n?Object(c.jsx)(f.a,{variant:"contained",color:"secondary",onClick:function(){o(!1),L.stop().getMp3().then((function(e){var t=Object(s.a)(e,2),n=t[0],c=t[1];console.log("Finished recording!");var a=new FormData,o={contentType:"multipart/form-data",responseType:"blob"},i=new File(n,"audio.mp3",{type:c.type,lastModified:Date.now()});A(new Audio(URL.createObjectURL(i),{onEnded:E})),a.append("file",i),y(!0);var r=Object(u.v4)();b.a.post("https://api.melody-snippets.de/convert?filename=".concat(r),a,o).then((function(e){var t=new Blob([e.data],{type:"application/pdf"});T(URL.createObjectURL(t)),b.a.get("https://api.melody-snippets.de/get_midi/".concat(r),o).then((function(e){var t=new Blob([e.data],{type:"audio/midi"});F(URL.createObjectURL(t)),y(!1)}))})).catch((function(e){return console.log(e)}))})).catch((function(e){alert("We could not retrieve your message"),console.log(e)}))},startIcon:Object(c.jsx)(v.a,{}),children:"Stop Recording"}):Object(c.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(){o(!0),L.start().then((function(){console.log("Recording!!")})).catch((function(e){console.error(e)}))},startIcon:Object(c.jsx)(m.a,{}),children:"Start Recording"}),Object(c.jsxs)("div",{children:[Object(c.jsx)(f.a,{variant:"contained",color:"default",onClick:function(){R&&(l(!0),R.play())},startIcon:Object(c.jsx)(g.a,{})}),Object(c.jsx)(f.a,{variant:"contained",color:"default",onClick:function(){R&&j&&(l(!1),R.pause())},startIcon:Object(c.jsx)(k.a,{})}),Object(c.jsx)(f.a,{variant:"contained",color:"default",onClick:E,startIcon:Object(c.jsx)(v.a,{})})]}),x?Object(c.jsx)("span",{children:"Processing..."}):null,B?Object(c.jsxs)("div",{children:[Object(c.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(){Object(O.saveAs)(B,"score.pdf")},startIcon:Object(c.jsx)(I.a,{}),children:"Save PDF"}),Object(c.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(){Object(O.saveAs)(D,"score.mid")},startIcon:Object(c.jsx)(C.a,{}),children:"Save MIDI"}),Object(c.jsx)(p.a,{file:B,onLoadSuccess:function(e){var t=e.numPages;_(t),K(1)},children:Object(c.jsx)(p.b,{pageNumber:H})}),Object(c.jsxs)("p",{children:["Page ",H," of ",G]})]}):null]})]})}r.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(A,{})}),document.getElementById("root"))}},[[124,1,2]]]);
//# sourceMappingURL=main.153a9d58.chunk.js.map